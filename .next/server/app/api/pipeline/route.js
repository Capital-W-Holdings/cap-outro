"use strict";(()=>{var e={};e.id=603,e.ids=[603],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8993:(e,t,n)=>{n.r(t),n.d(t,{originalPathname:()=>g,patchFetch:()=>h,requestAsyncStorage:()=>p,routeModule:()=>l,serverHooks:()=>_,staticGenerationAsyncStorage:()=>m});var r={};n.r(r),n.d(r,{GET:()=>d,POST:()=>u});var o=n(9303),a=n(8716),s=n(3131),i=n(2602);let c=[{id:"1",campaign_id:"1",investor_id:"1",stage:"contacted",amount_soft:null,amount_committed:null,notes:"Sent initial outreach",last_activity_at:new Date().toISOString(),created_at:new Date().toISOString()},{id:"2",campaign_id:"1",investor_id:"2",stage:"meeting_scheduled",amount_soft:5e5,amount_committed:null,notes:"Call scheduled for next week",last_activity_at:new Date().toISOString(),created_at:new Date().toISOString()}];async function d(e){return(0,i.bi)(async()=>{let t=e.nextUrl.searchParams.get("campaign_id"),n=c;t&&(n=c.filter(e=>e.campaign_id===t));let r=["not_contacted","contacted","responded","meeting_scheduled","meeting_held","dd","term_sheet","committed","passed"],o={};r.forEach(e=>{o[e]=n.filter(t=>t.stage===e)});let a={total:n.length,by_stage:Object.fromEntries(r.map(e=>[e,o[e].length])),total_soft:n.reduce((e,t)=>e+(t.amount_soft??0),0),total_committed:n.reduce((e,t)=>e+(t.amount_committed??0),0)};return(0,i.Xj)({entries:n,by_stage:o,stats:a})})}async function u(e){return(0,i.bi)(async()=>{let t=await e.json(),n={id:`pipe-${Date.now()}`,campaign_id:t.campaign_id,investor_id:t.investor_id,stage:t.stage??"not_contacted",amount_soft:null,amount_committed:null,notes:null,last_activity_at:new Date().toISOString(),created_at:new Date().toISOString()};return c.push(n),(0,i.Xj)(n)})}let l=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/pipeline/route",pathname:"/api/pipeline",filename:"route",bundlePath:"app/api/pipeline/route"},resolvedPagePath:"/Users/jessewitkowski/Projects/cap-outro/src/app/api/pipeline/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:p,staticGenerationAsyncStorage:m,serverHooks:_}=l,g="/api/pipeline/route";function h(){return(0,s.patchFetch)({serverHooks:_,staticGenerationAsyncStorage:m})}},2602:(e,t,n)=>{n.d(t,{Kz:()=>u,Xj:()=>i,bi:()=>d,dR:()=>s,p8:()=>a});var r=n(7070);class o extends Error{constructor(e,t,n){super(t),this.code=e,this.details=n,this.name="AppError"}}class a extends o{constructor(e,t){super("VALIDATION_ERROR",e,t),this.name="ValidationError"}}class s extends o{constructor(e){super("NOT_FOUND",`${e} not found`),this.name="NotFoundError"}}function i(e,t){return r.NextResponse.json({success:!0,data:e,...t&&{meta:t}})}function c(e){if(e instanceof o){let t={UNAUTHORIZED:401,FORBIDDEN:403,NOT_FOUND:404,VALIDATION_ERROR:400,RATE_LIMITED:429,INTERNAL_ERROR:500}[e.code];return r.NextResponse.json({success:!1,error:{code:e.code,message:e.message,...e.details&&{details:e.details}}},{status:t})}return console.error("Unhandled error:",e),r.NextResponse.json({success:!1,error:{code:"INTERNAL_ERROR",message:"An unexpected error occurred"}},{status:500})}function d(e){return e().catch(e=>e instanceof o||e instanceof Error?c(e):c(Error("Unknown error")))}async function u(e,t){try{let n=await e.json();return t(n)}catch(e){if(e instanceof a)throw e;throw new a("Invalid JSON body")}}}};var t=require("../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[276,972],()=>n(8993));module.exports=r})();
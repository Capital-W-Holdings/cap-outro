"use strict";(()=>{var e={};e.id=412,e.ids=[412],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8397:(e,t,o)=>{o.r(t),o.d(t,{originalPathname:()=>g,patchFetch:()=>f,requestAsyncStorage:()=>_,routeModule:()=>d,serverHooks:()=>h,staticGenerationAsyncStorage:()=>y});var n={};o.r(n),o.d(n,{GET:()=>u,POST:()=>p});var r=o(9303),a=o(8716),i=o(3131),s=o(2602),l=o(8242),c=o(4953);let m=[{id:"1",org_id:"org-1",name:"Cold Outreach - Series A",subject:"Quick intro - {{company_name}}",body:`<p>Hi {{investor_first_name}},</p>

<p>I'm {{founder_name}}, founder of {{company_name}}. We're raising a {{raise_type}} round and I thought you might be interested given your focus on {{investor_sectors}}.</p>

<p>Quick highlights:</p>
<ul>
  <li>{{key_metric_1}}</li>
  <li>{{key_metric_2}}</li>
  <li>{{key_metric_3}}</li>
</ul>

<p>Would love to share our deck and get 15 minutes on your calendar. Here's my availability: {{calendar_link}}</p>

<p>Best,<br>{{founder_name}}</p>`,variables:["investor_first_name","founder_name","company_name","raise_type","investor_sectors","key_metric_1","key_metric_2","key_metric_3","calendar_link"],type:"initial",created_at:new Date().toISOString()},{id:"2",org_id:"org-1",name:"Follow-up #1",subject:"Re: Quick intro - {{company_name}}",body:`<p>Hi {{investor_first_name}},</p>

<p>Just following up on my email from last week. I know you're busy, but I'd love to get {{company_name}} on your radar.</p>

<p>We just hit a big milestone - {{recent_milestone}}. Would be great to share more.</p>

<p>Here's the deck if you'd like to take a look: {{deck_url}}</p>

<p>Best,<br>{{founder_name}}</p>`,variables:["investor_first_name","company_name","recent_milestone","deck_url","founder_name"],type:"followup",created_at:new Date().toISOString()},{id:"3",org_id:"org-1",name:"Warm Intro Request",subject:"Intro request: {{company_name}} <> {{investor_name}}",body:`<p>Hi {{connection_name}},</p>

<p>Hope you're doing well! I'm reaching out because I noticed you're connected with {{investor_name}} at {{investor_firm}}.</p>

<p>We're currently raising our {{raise_type}} and I think {{company_name}} would be a great fit for their portfolio. Would you be willing to make a warm intro?</p>

<p>Happy to send over a blurb you can forward, or jump on a quick call to give you the full pitch first.</p>

<p>Thanks so much!<br>{{founder_name}}</p>`,variables:["connection_name","investor_name","investor_firm","raise_type","company_name","founder_name"],type:"intro_request",created_at:new Date().toISOString()}];async function u(e){return(0,s.bi)(async()=>{let t=e.nextUrl.searchParams.get("type"),o=m;return t&&(o=m.filter(e=>e.type===t)),(0,s.Xj)(o,{page:1,limit:50,total:o.length})})}async function p(e){return(0,s.bi)(async()=>{let t=await (0,s.Kz)(e,l.RX),o=(0,c.cA)(t.subject+" "+t.body),n={id:`tpl-${Date.now()}`,org_id:"org-1",name:t.name,subject:t.subject,body:t.body,variables:o,type:t.type??"initial",created_at:new Date().toISOString()};return m.push(n),(0,s.Xj)(n)})}let d=new r.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/templates/route",pathname:"/api/templates",filename:"route",bundlePath:"app/api/templates/route"},resolvedPagePath:"/Users/jessewitkowski/Projects/cap-outro/src/app/api/templates/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:_,staticGenerationAsyncStorage:y,serverHooks:h}=d,g="/api/templates/route";function f(){return(0,i.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:y})}},2602:(e,t,o)=>{o.d(t,{Kz:()=>m,Xj:()=>s,bi:()=>c,dR:()=>i,p8:()=>a});var n=o(7070);class r extends Error{constructor(e,t,o){super(t),this.code=e,this.details=o,this.name="AppError"}}class a extends r{constructor(e,t){super("VALIDATION_ERROR",e,t),this.name="ValidationError"}}class i extends r{constructor(e){super("NOT_FOUND",`${e} not found`),this.name="NotFoundError"}}function s(e,t){return n.NextResponse.json({success:!0,data:e,...t&&{meta:t}})}function l(e){if(e instanceof r){let t={UNAUTHORIZED:401,FORBIDDEN:403,NOT_FOUND:404,VALIDATION_ERROR:400,RATE_LIMITED:429,INTERNAL_ERROR:500}[e.code];return n.NextResponse.json({success:!1,error:{code:e.code,message:e.message,...e.details&&{details:e.details}}},{status:t})}return console.error("Unhandled error:",e),n.NextResponse.json({success:!1,error:{code:"INTERNAL_ERROR",message:"An unexpected error occurred"}},{status:500})}function c(e){return e().catch(e=>e instanceof r||e instanceof Error?l(e):l(Error("Unknown error")))}async function m(e,t){try{let o=await e.json();return t(o)}catch(e){if(e instanceof a)throw e;throw new a("Invalid JSON body")}}},8242:(e,t,o)=>{o.d(t,{G6:()=>h,Qx:()=>_,RX:()=>g,gB:()=>d,jn:()=>p,tc:()=>y});var n=o(6543),r=o(2602);let a=n.Ryn({name:n.Z_8().min(1,"Name is required").max(100,"Name too long"),raise_amount:n.Rxh().positive().optional(),raise_type:n.KmV(["seed","series_a","series_b","bridge","note"]).optional(),sector:n.IXX(n.Z_8()).optional(),deck_url:n.Z_8().url("Invalid URL").optional().or(n.i0J(""))}),i=n.Ryn({name:n.Z_8().min(1).max(100).optional(),status:n.KmV(["draft","active","paused","completed"]).optional(),raise_amount:n.Rxh().positive().optional(),raise_type:n.KmV(["seed","series_a","series_b","bridge","note"]).optional(),sector:n.IXX(n.Z_8()).optional(),deck_url:n.Z_8().url().optional().or(n.i0J(""))}),s=n.Ryn({name:n.Z_8().min(1,"Name is required").max(100,"Name too long"),email:n.Z_8().email("Invalid email").optional().or(n.i0J("")),firm:n.Z_8().max(100).optional(),title:n.Z_8().max(100).optional(),linkedin_url:n.Z_8().url("Invalid URL").optional().or(n.i0J("")),check_size_min:n.Rxh().positive().optional(),check_size_max:n.Rxh().positive().optional(),stages:n.IXX(n.Z_8()).optional(),sectors:n.IXX(n.Z_8()).optional()}),l=n.Ryn({investors:n.IXX(n.Ryn({name:n.Z_8().min(1),email:n.Z_8().email().optional().or(n.i0J("")),firm:n.Z_8().optional(),title:n.Z_8().optional(),linkedin_url:n.Z_8().url().optional().or(n.i0J(""))})).min(1,"At least one investor required").max(1e3,"Maximum 1000 investors per import")}),c=n.Ryn({stage:n.KmV(["not_contacted","contacted","responded","meeting_scheduled","meeting_held","dd","term_sheet","committed","passed"]).optional(),amount_soft:n.Rxh().positive().optional(),amount_committed:n.Rxh().positive().optional(),notes:n.Z_8().max(1e3).optional()}),m=n.Ryn({name:n.Z_8().min(1).max(100),subject:n.Z_8().min(1).max(200),body:n.Z_8().min(1).max(1e4),type:n.KmV(["initial","followup","intro_request","update"]).optional()});function u(e){return t=>{let o=e.safeParse(t);if(!o.success){let e={};throw o.error.issues.forEach(t=>{let o=t.path.join(".")||"root";e[o]||(e[o]=[]),e[o].push(t.message)}),new r.p8("Validation failed",e)}return o.data}}let p=u(a),d=u(i),_=u(s),y=u(l),h=u(c),g=u(m)},4953:(e,t,o)=>{o.d(t,{cA:()=>s,Fu:()=>l,Cz:()=>i});class n{constructor(e,t){this.apiKey=e,this.defaultFrom=t??"Cap Outro <noreply@capoutro.com>"}async send(e){try{let t=Array.isArray(e.to)?e.to.map(e=>e.name?`${e.name} <${e.email}>`:e.email):[e.to.name?`${e.to.name} <${e.to.email}>`:e.to.email],o={from:e.from?`${e.from.name??""} <${e.from.email}>`.trim():this.defaultFrom,to:t,subject:e.subject,html:e.html};e.text&&(o.text=e.text),e.replyTo&&(o.reply_to=e.replyTo.name?`${e.replyTo.name} <${e.replyTo.email}>`:e.replyTo.email),e.tags&&e.tags.length>0&&(o.tags=e.tags.map(e=>({name:e,value:"true"}))),e.trackingId&&(o.headers={"X-Tracking-Id":e.trackingId});let n=await fetch("https://api.resend.com/emails",{method:"POST",headers:{Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json"},body:JSON.stringify(o)}),r=await n.json();if(!n.ok)return{success:!1,error:r.message??`HTTP ${n.status}`};return{success:!0,messageId:r.id}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}}class r{async send(e){return console.log("\uD83D\uDCE7 Mock Email Sent:"),console.log("  To:",Array.isArray(e.to)?e.to.map(e=>e.email).join(", "):e.to.email),console.log("  Subject:",e.subject),console.log("  Tracking ID:",e.trackingId??"none"),console.log("---"),this.sentEmails.push(e),await new Promise(e=>setTimeout(e,100)),{success:!0,messageId:`mock_${Date.now()}_${Math.random().toString(36).slice(2)}`}}getSentEmails(){return this.sentEmails}clearSentEmails(){this.sentEmails=[]}constructor(){this.sentEmails=[]}}let a=null;async function i(e){return(function(){if(!a){let e=process.env.RESEND_API_KEY;e&&"demo"!==e?a=new n(e):(console.log("⚠️ Using mock email provider (no RESEND_API_KEY set)"),a=new r)}return a})().send(e)}function s(e){let t;let o=/\{\{\s*(\w+)\s*\}\}/g,n=[];for(;null!==(t=o.exec(e));){let e=t[1];e&&!n.includes(e)&&n.push(e)}return n}function l(e,t,o={}){let n=e;return!1!==o.trackOpens&&(n=function(e,t){let o=`http://localhost:3000/api/tracking/open?id=${t}`,n=`<img src="${o}" width="1" height="1" style="display:none" alt="" />`;return e.includes("</body>")?e.replace("</body>",`${n}</body>`):e+n}(n,t)),!1!==o.trackClicks&&(n=n.replace(/href="(https?:\/\/[^"]+)"/g,(e,o)=>{let n=`http://localhost:3000/api/tracking/click?id=${t}&url=${encodeURIComponent(o)}`;return`href="${n}"`})),n}}};var t=require("../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),n=t.X(0,[276,972,543],()=>o(8397));module.exports=n})();
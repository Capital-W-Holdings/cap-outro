"use strict";(()=>{var e={};e.id=515,e.ids=[515],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2072:(e,t,o)=>{o.r(t),o.d(t,{originalPathname:()=>_,patchFetch:()=>h,requestAsyncStorage:()=>p,routeModule:()=>c,serverHooks:()=>d,staticGenerationAsyncStorage:()=>m});var r={};o.r(r),o.d(r,{POST:()=>u});var n=o(9303),i=o(8716),s=o(3131),a=o(2602),l=o(8242);async function u(e){return(0,a.bi)(async()=>{let t=await (0,a.Kz)(e,l.tc),o=[],r=[];return t.investors.forEach((e,t)=>{try{let r={id:`inv-${Date.now()}-${t}`,org_id:"org-1",name:e.name,email:e.email||null,firm:e.firm??null,title:e.title??null,linkedin_url:e.linkedin_url||null,check_size_min:null,check_size_max:null,stages:[],sectors:[],fit_score:null,warm_paths:[],source:"import",created_at:new Date().toISOString()};o.push(r)}catch(e){r.push({row:t+1,error:e instanceof Error?e.message:"Unknown error"})}}),(0,a.Xj)({imported:o.length,errors:r.length,errorDetails:r.length>0?r:void 0})})}let c=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/investors/bulk/route",pathname:"/api/investors/bulk",filename:"route",bundlePath:"app/api/investors/bulk/route"},resolvedPagePath:"/Users/jessewitkowski/Projects/cap-outro/src/app/api/investors/bulk/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:p,staticGenerationAsyncStorage:m,serverHooks:d}=c,_="/api/investors/bulk/route";function h(){return(0,s.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:m})}},2602:(e,t,o)=>{o.d(t,{Kz:()=>c,Xj:()=>a,bi:()=>u,dR:()=>s,p8:()=>i});var r=o(7070);class n extends Error{constructor(e,t,o){super(t),this.code=e,this.details=o,this.name="AppError"}}class i extends n{constructor(e,t){super("VALIDATION_ERROR",e,t),this.name="ValidationError"}}class s extends n{constructor(e){super("NOT_FOUND",`${e} not found`),this.name="NotFoundError"}}function a(e,t){return r.NextResponse.json({success:!0,data:e,...t&&{meta:t}})}function l(e){if(e instanceof n){let t={UNAUTHORIZED:401,FORBIDDEN:403,NOT_FOUND:404,VALIDATION_ERROR:400,RATE_LIMITED:429,INTERNAL_ERROR:500}[e.code];return r.NextResponse.json({success:!1,error:{code:e.code,message:e.message,...e.details&&{details:e.details}}},{status:t})}return console.error("Unhandled error:",e),r.NextResponse.json({success:!1,error:{code:"INTERNAL_ERROR",message:"An unexpected error occurred"}},{status:500})}function u(e){return e().catch(e=>e instanceof n||e instanceof Error?l(e):l(Error("Unknown error")))}async function c(e,t){try{let o=await e.json();return t(o)}catch(e){if(e instanceof i)throw e;throw new i("Invalid JSON body")}}},8242:(e,t,o)=>{o.d(t,{G6:()=>R,Qx:()=>_,RX:()=>x,gB:()=>d,jn:()=>m,tc:()=>h});var r=o(6543),n=o(2602);let i=r.Ryn({name:r.Z_8().min(1,"Name is required").max(100,"Name too long"),raise_amount:r.Rxh().positive().optional(),raise_type:r.KmV(["seed","series_a","series_b","bridge","note"]).optional(),sector:r.IXX(r.Z_8()).optional(),deck_url:r.Z_8().url("Invalid URL").optional().or(r.i0J(""))}),s=r.Ryn({name:r.Z_8().min(1).max(100).optional(),status:r.KmV(["draft","active","paused","completed"]).optional(),raise_amount:r.Rxh().positive().optional(),raise_type:r.KmV(["seed","series_a","series_b","bridge","note"]).optional(),sector:r.IXX(r.Z_8()).optional(),deck_url:r.Z_8().url().optional().or(r.i0J(""))}),a=r.Ryn({name:r.Z_8().min(1,"Name is required").max(100,"Name too long"),email:r.Z_8().email("Invalid email").optional().or(r.i0J("")),firm:r.Z_8().max(100).optional(),title:r.Z_8().max(100).optional(),linkedin_url:r.Z_8().url("Invalid URL").optional().or(r.i0J("")),check_size_min:r.Rxh().positive().optional(),check_size_max:r.Rxh().positive().optional(),stages:r.IXX(r.Z_8()).optional(),sectors:r.IXX(r.Z_8()).optional()}),l=r.Ryn({investors:r.IXX(r.Ryn({name:r.Z_8().min(1),email:r.Z_8().email().optional().or(r.i0J("")),firm:r.Z_8().optional(),title:r.Z_8().optional(),linkedin_url:r.Z_8().url().optional().or(r.i0J(""))})).min(1,"At least one investor required").max(1e3,"Maximum 1000 investors per import")}),u=r.Ryn({stage:r.KmV(["not_contacted","contacted","responded","meeting_scheduled","meeting_held","dd","term_sheet","committed","passed"]).optional(),amount_soft:r.Rxh().positive().optional(),amount_committed:r.Rxh().positive().optional(),notes:r.Z_8().max(1e3).optional()}),c=r.Ryn({name:r.Z_8().min(1).max(100),subject:r.Z_8().min(1).max(200),body:r.Z_8().min(1).max(1e4),type:r.KmV(["initial","followup","intro_request","update"]).optional()});function p(e){return t=>{let o=e.safeParse(t);if(!o.success){let e={};throw o.error.issues.forEach(t=>{let o=t.path.join(".")||"root";e[o]||(e[o]=[]),e[o].push(t.message)}),new n.p8("Validation failed",e)}return o.data}}let m=p(i),d=p(s),_=p(a),h=p(l),R=p(u),x=p(c)}};var t=require("../../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),r=t.X(0,[276,972,543],()=>o(2072));module.exports=r})();
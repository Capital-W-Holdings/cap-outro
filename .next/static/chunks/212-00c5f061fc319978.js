"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[212],{212:function(e,s,t){t.d(s,{d$:function(){return N},F$:function(){return h}});var a=t(7437),l=t(8420),r=t(9345),n=t(598),i=t(7782),c=t(525),d=t(9820);function o(e){var s,t,o;let{investor:m,onSelect:x,onMenuClick:h,selected:g}=e,p=m.check_size_min&&m.check_size_max?"$".concat((m.check_size_min/1e3).toFixed(0),"K - $").concat((m.check_size_max/1e6).toFixed(1),"M"):m.check_size_min?"$".concat((m.check_size_min/1e3).toFixed(0),"K+"):null,u=(null!==(s=m.fit_score)&&void 0!==s?s:0)>=80?"text-green-400":(null!==(t=m.fit_score)&&void 0!==t?t:0)>=60?"text-yellow-400":(null!==(o=m.fit_score)&&void 0!==o?o:0)>=40?"text-orange-400":"text-gray-400";return(0,a.jsxs)(d.Zb,{hover:!0,className:"\n        cursor-pointer transition-all\n        ".concat(g?"ring-2 ring-brand-gold border-brand-gold":"","\n      "),onClick:()=>null==x?void 0:x(m),children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-dark-600 flex items-center justify-center text-brand-gold font-semibold",children:m.name.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-white",children:m.name}),m.firm&&(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-sm text-gray-400 mt-0.5",children:[(0,a.jsx)(l.Z,{className:"w-3.5 h-3.5"}),(0,a.jsx)("span",{children:m.firm}),m.title&&(0,a.jsxs)("span",{className:"text-gray-500",children:["\xb7 ",m.title]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[m.email&&(0,a.jsx)("a",{href:"mailto:".concat(m.email),onClick:e=>e.stopPropagation(),className:"p-1 text-gray-500 hover:text-brand-gold transition-colors",title:m.email,children:(0,a.jsx)(r.Z,{className:"w-4 h-4"})}),m.linkedin_url&&(0,a.jsx)("a",{href:m.linkedin_url,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"p-1 text-gray-500 hover:text-brand-gold transition-colors",children:(0,a.jsx)(n.Z,{className:"w-4 h-4"})})]})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[null!==m.fit_score&&(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Fit Score"}),(0,a.jsx)("p",{className:"text-lg font-bold ".concat(u),children:m.fit_score})]}),h&&(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),h(m)},className:"p-1 text-gray-500 hover:text-white hover:bg-dark-600 rounded transition-colors",children:(0,a.jsx)(i.Z,{className:"w-5 h-5"})})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-4 pt-3 border-t border-dark-600",children:[p&&(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-sm",children:[(0,a.jsx)(c.Z,{className:"w-4 h-4 text-gray-500"}),(0,a.jsx)("span",{className:"text-gray-300",children:p})]}),m.stages.length>0&&(0,a.jsx)("div",{className:"flex items-center gap-1",children:m.stages.slice(0,2).map(e=>(0,a.jsx)("span",{className:"px-1.5 py-0.5 bg-dark-600 rounded text-xs text-gray-400",children:e.replace("_"," ")},e))}),m.sectors.length>0&&(0,a.jsx)("div",{className:"flex items-center gap-1 ml-auto",children:m.sectors.slice(0,2).map(e=>(0,a.jsx)("span",{className:"px-1.5 py-0.5 bg-brand-gold/10 text-brand-gold rounded text-xs",children:e},e))})]})]})}var m=t(8989),x=t(2388);function h(e){let{search:s,onAddInvestor:t,onSelectInvestor:l,selectedIds:r=[],selectable:n=!1}=e,{data:i,isLoading:c,error:d,refetch:h}=(0,m.uF)(s);return c?(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:Array.from({length:6}).map((e,s)=>(0,a.jsx)(x.As,{},s))}):d?(0,a.jsx)(x.Te,{error:d,onRetry:h}):i&&0!==i.length?(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:i.map(e=>(0,a.jsx)(o,{investor:e,onSelect:n?l:void 0,selected:r.includes(e.id)},e.id))}):(0,a.jsx)(x.rg,{onAddInvestor:t})}var g=t(2265),p=t(1671),u=t(8736),j=t(2489),f=t(7689),v=t(9322);function N(e){let{isOpen:s,onClose:t,onSuccess:l}=e,[r,n]=(0,g.useState)(null),[i,c]=(0,g.useState)([]),[d,o]=(0,g.useState)(null),[h,N]=(0,g.useState)(null),{mutate:b,isLoading:y,error:k}=(0,m.Pe)(),w=(0,g.useCallback)(e=>{let s=e.split("\n").filter(e=>e.trim());if(s.length<2)throw Error("CSV must have a header row and at least one data row");let t=s[0];if(!t)throw Error("CSV must have a header row");let a=t.toLowerCase().split(",").map(e=>e.trim()),l=a.findIndex(e=>"name"===e||"full name"===e||"investor"===e),r=a.findIndex(e=>"email"===e||"e-mail"===e),n=a.findIndex(e=>"firm"===e||"company"===e||"fund"===e),i=a.findIndex(e=>"title"===e||"role"===e||"position"===e),c=a.findIndex(e=>e.includes("linkedin"));if(-1===l)throw Error('CSV must have a "name" column');let d=[];for(let e=1;e<s.length;e++){let t=s[e];if(!t)continue;let a=t.split(",").map(e=>e.trim().replace(/^"|"$/g,"")),o=a[l];o&&d.push({name:o,email:r>=0?a[r]:void 0,firm:n>=0?a[n]:void 0,title:i>=0?a[i]:void 0,linkedin_url:c>=0?a[c]:void 0})}return d},[]),_=(0,g.useCallback)(e=>{var s;let t=null===(s=e.target.files)||void 0===s?void 0:s[0];if(!t)return;n(t),o(null),c([]),N(null);let a=new FileReader;a.onload=e=>{try{var s;let t=null===(s=e.target)||void 0===s?void 0:s.result,a=w(t);c(a)}catch(e){o(e instanceof Error?e.message:"Failed to parse CSV")}},a.readAsText(t)},[w]),C=async()=>{if(0!==i.length)try{let e=await b({investors:i});N(e),null==l||l()}catch(e){}},S=()=>{n(null),c([]),o(null),N(null),t()};return(0,a.jsx)(x.u_,{isOpen:s,onClose:S,title:"Import Investors",size:"lg",children:h?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-full bg-green-500/10 flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(p.Z,{className:"w-8 h-8 text-green-400"})}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"Import Complete"}),(0,a.jsxs)("p",{className:"text-gray-400",children:["Successfully imported ",h.imported," investor",1!==h.imported?"s":"",".",h.errors>0&&(0,a.jsxs)("span",{className:"text-yellow-400",children:[" (",h.errors," failed)"]})]}),(0,a.jsx)(x.zx,{variant:"primary",onClick:S,className:"mt-6",children:"Done"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"\n              border-2 border-dashed rounded-xl p-8 text-center transition-colors\n              ".concat(r?"border-brand-gold bg-brand-gold/5":"border-dark-500 hover:border-dark-400","\n            "),children:r?(0,a.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,a.jsx)(u.Z,{className:"w-8 h-8 text-brand-gold"}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("p",{className:"text-white font-medium",children:r.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-400",children:[i.length," investor",1!==i.length?"s":""," found"]})]}),(0,a.jsx)("button",{onClick:()=>{n(null),c([]),o(null)},className:"p-1 text-gray-400 hover:text-white",children:(0,a.jsx)(j.Z,{className:"w-5 h-5"})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.Z,{className:"w-10 h-10 text-gray-500 mx-auto mb-3"}),(0,a.jsxs)("label",{className:"cursor-pointer",children:[(0,a.jsx)("span",{className:"text-brand-gold hover:underline",children:"Choose a CSV file"}),(0,a.jsx)("span",{className:"text-gray-400",children:" or drag and drop"}),(0,a.jsx)("input",{type:"file",accept:".csv",onChange:_,className:"hidden"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Columns: name (required), email, firm, title, linkedin_url"})]})}),d&&(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-4 text-red-500",children:[(0,a.jsx)(v.Z,{className:"w-5 h-5"}),(0,a.jsx)("p",{className:"text-sm",children:d})]}),i.length>0&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-400 mb-2",children:"Preview (first 5):"}),(0,a.jsx)("div",{className:"bg-dark-700 rounded-lg p-3 max-h-40 overflow-auto",children:i.slice(0,5).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center gap-4 py-1.5 border-b border-dark-600 last:border-0",children:[(0,a.jsx)("span",{className:"text-white font-medium",children:e.name}),e.firm&&(0,a.jsx)("span",{className:"text-gray-400 text-sm",children:e.firm}),e.email&&(0,a.jsx)("span",{className:"text-gray-500 text-sm",children:e.email})]},s))})]}),k&&(0,a.jsx)("p",{className:"text-sm text-red-500 mt-4",children:k.message}),(0,a.jsxs)(x.mz,{children:[(0,a.jsx)(x.zx,{variant:"ghost",onClick:S,disabled:y,children:"Cancel"}),(0,a.jsxs)(x.zx,{variant:"primary",onClick:C,disabled:0===i.length,isLoading:y,children:["Import ",i.length," Investor",1!==i.length?"s":""]})]})]})})}}}]);
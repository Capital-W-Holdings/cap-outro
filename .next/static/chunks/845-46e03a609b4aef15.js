"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[845],{4845:function(e,t,a){a.d(t,{PC:function(){return k},hl:function(){return T}});var n=a(7437),s=a(9345),r=a(598),i=a(3044),l=a(1723),c=a(1905),o=a(5868),u=a(8930),d=a(9820);let x={email:s.Z,linkedin:r.Z,task:i.Z,wait:l.Z},p={email:"bg-blue-500/10 text-blue-400 border-blue-500/20",linkedin:"bg-cyan-500/10 text-cyan-400 border-cyan-500/20",task:"bg-purple-500/10 text-purple-400 border-purple-500/20",wait:"bg-gray-500/10 text-gray-400 border-gray-500/20"},m={email:"Email",linkedin:"LinkedIn",task:"Task",wait:"Wait"};function h(e){let{step:t,index:a,onEdit:s,onDelete:r}=e,i=x[t.type],l=p[t.type];return(0,n.jsx)(d.Zb,{className:"group relative",children:(0,n.jsxs)("div",{className:"flex items-start gap-4",children:[(0,n.jsx)("div",{className:"flex-shrink-0 cursor-grab text-gray-600 hover:text-gray-400",children:(0,n.jsx)(c.Z,{className:"w-5 h-5"})}),(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center border ".concat(l),children:(0,n.jsx)(i,{className:"w-5 h-5"})})}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,n.jsxs)("span",{className:"text-sm font-medium text-gray-400",children:["Step ",a+1]}),(0,n.jsx)("span",{className:"text-xs text-gray-600",children:"•"}),(0,n.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-medium ".concat(l),children:m[t.type]}),t.delay_days>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-xs text-gray-600",children:"•"}),(0,n.jsxs)("span",{className:"text-xs text-gray-500",children:[t.delay_days," day",1!==t.delay_days?"s":""," delay"]})]})]}),"email"===t.type&&(0,n.jsxs)(n.Fragment,{children:[t.subject&&(0,n.jsx)("p",{className:"text-sm font-medium text-white truncate",children:t.subject}),t.content&&(0,n.jsx)("p",{className:"text-sm text-gray-400 mt-1 line-clamp-2",children:t.content})]}),"linkedin"===t.type&&t.content&&(0,n.jsx)("p",{className:"text-sm text-gray-400 line-clamp-2",children:t.content}),"task"===t.type&&t.content&&(0,n.jsx)("p",{className:"text-sm text-gray-400",children:t.content}),"wait"===t.type&&(0,n.jsxs)("p",{className:"text-sm text-gray-500",children:["Wait ",t.delay_days," day",1!==t.delay_days?"s":""," before next step"]})]}),(0,n.jsxs)("div",{className:"flex-shrink-0 flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[s&&(0,n.jsx)("button",{onClick:()=>s(t),className:"p-2 text-gray-500 hover:text-white hover:bg-dark-600 rounded transition-colors",children:(0,n.jsx)(o.Z,{className:"w-4 h-4"})}),r&&(0,n.jsx)("button",{onClick:()=>r(t),className:"p-2 text-gray-500 hover:text-red-400 hover:bg-dark-600 rounded transition-colors",children:(0,n.jsx)(u.Z,{className:"w-4 h-4"})})]})]})})}var f=a(2265),g=a(9227),y=a(2829),j=a(8728),v=a(9397),b=a(8989),N=a(2388);let w=[{value:"email",label:"Email"},{value:"linkedin",label:"LinkedIn Message"},{value:"task",label:"Manual Task"},{value:"wait",label:"Wait / Delay"}];function k(e){let{sequenceId:t}=e,{data:a,isLoading:s,error:r,refetch:i}=(0,b.Hv)(t),{mutate:l,isLoading:c}=(0,b.Mn)(t),{mutate:o,isLoading:u}=(0,b.pf)(t),[d,x]=(0,f.useState)(!1),[p,m]=(0,f.useState)("email"),[k,C]=(0,f.useState)("0"),[S,D]=(0,f.useState)(""),[T,_]=(0,f.useState)("");if(s)return(0,n.jsx)(N.h2,{});if(r)return(0,n.jsx)(N.Te,{error:r,onRetry:i});if(!a)return(0,n.jsx)(N.Te,{error:"Sequence not found"});let L=async()=>{let e="active"===a.status?"paused":"active";try{await l({status:e}),i()}catch(e){}},P=async()=>{var e,t;let n=(null!==(t=null===(e=a.steps)||void 0===e?void 0:e.length)&&void 0!==t?t:0)+1;try{await o({order:n,type:p,delay_days:parseInt(k,10)||0,subject:S||void 0,content:T||void 0}),m("email"),C("0"),D(""),_(""),x(!1),i()}catch(e){}},Z=e=>{console.log("Edit step:",e)},E=e=>{console.log("Delete step:",e)},q="active"===a.status?"text-green-400":"paused"===a.status?"text-yellow-400":"text-gray-400";return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-xl font-semibold text-white",children:a.name}),(0,n.jsx)("p",{className:"text-sm ".concat(q),children:a.status.charAt(0).toUpperCase()+a.status.slice(1)})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(N.zx,{variant:"active"===a.status?"secondary":"primary",onClick:L,isLoading:c,leftIcon:"active"===a.status?(0,n.jsx)(g.Z,{className:"w-4 h-4"}):(0,n.jsx)(y.Z,{className:"w-4 h-4"}),children:"active"===a.status?"Pause":"Activate"}),(0,n.jsx)(N.zx,{variant:"outline",leftIcon:(0,n.jsx)(j.Z,{className:"w-4 h-4"}),children:"Settings"})]})]}),(0,n.jsxs)("div",{className:"space-y-3",children:[a.steps&&a.steps.length>0?a.steps.map((e,t)=>(0,n.jsx)(h,{step:e,index:t,onEdit:Z,onDelete:E},e.id)):(0,n.jsx)(N.ub,{title:"No steps yet",description:"Add your first step to build the sequence."}),(0,n.jsxs)("button",{onClick:()=>x(!0),className:"w-full py-4 border-2 border-dashed border-dark-500 rounded-xl text-gray-500 hover:text-white hover:border-dark-400 transition-colors flex items-center justify-center gap-2",children:[(0,n.jsx)(v.Z,{className:"w-5 h-5"}),(0,n.jsx)("span",{children:"Add Step"})]})]}),(0,n.jsxs)(N.u_,{isOpen:d,onClose:()=>x(!1),title:"Add Step",size:"md",children:[(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(N.Ph,{label:"Step Type",options:w,value:p,onChange:e=>m(e.target.value)}),(0,n.jsx)(N.II,{label:"Delay (days)",type:"number",min:"0",value:k,onChange:e=>C(e.target.value),helperText:"Days to wait before this step"}),"email"===p&&(0,n.jsx)(N.II,{label:"Subject",placeholder:"Email subject line",value:S,onChange:e=>D(e.target.value)}),("email"===p||"linkedin"===p||"task"===p)&&(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1.5",children:"task"===p?"Task Description":"Content"}),(0,n.jsx)("textarea",{className:"w-full px-3 py-2 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-brand-gold focus:border-transparent resize-none",rows:4,placeholder:"email"===p?"Email body (use {{variables}} for personalization)":"linkedin"===p?"LinkedIn message":"Describe the task",value:T,onChange:e=>_(e.target.value)})]})]}),(0,n.jsxs)(N.mz,{children:[(0,n.jsx)(N.zx,{variant:"ghost",onClick:()=>x(!1),children:"Cancel"}),(0,n.jsx)(N.zx,{variant:"primary",onClick:P,isLoading:u,children:"Add Step"})]})]})]})}var C=a(7648),S=a(7782);let D={draft:{label:"Draft",color:"text-gray-400 bg-gray-500/10"},active:{label:"Active",color:"text-green-400 bg-green-500/10"},paused:{label:"Paused",color:"text-yellow-400 bg-yellow-500/10"}};function T(e){let{campaignId:t,onCreateSequence:a}=e,{data:r,isLoading:i,error:l,refetch:c}=(0,b.cI)(t);return i?(0,n.jsx)("div",{className:"space-y-4",children:Array.from({length:3}).map((e,t)=>(0,n.jsx)(N.As,{},t))}):l?(0,n.jsx)(N.Te,{error:l,onRetry:c}):r&&0!==r.length?(0,n.jsx)("div",{className:"space-y-4",children:r.map(e=>(0,n.jsx)(_,{sequence:e},e.id))}):(0,n.jsx)(N.ub,{icon:(0,n.jsx)(s.Z,{className:"w-8 h-8 text-gray-500"}),title:"No sequences yet",description:"Create your first sequence to automate investor outreach.",action:{label:"Create Sequence",onClick:a}})}function _(e){let{sequence:t}=e,a=D[t.status];return(0,n.jsx)(C.default,{href:"/sequences/".concat(t.id),children:(0,n.jsx)(N.Zb,{hover:!0,className:"group",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center ".concat(a.color),children:"active"===t.status?(0,n.jsx)(y.Z,{className:"w-5 h-5"}):"paused"===t.status?(0,n.jsx)(g.Z,{className:"w-5 h-5"}):(0,n.jsx)(s.Z,{className:"w-5 h-5"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-semibold text-white group-hover:text-brand-gold transition-colors",children:t.name}),(0,n.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,n.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-medium ".concat(a.color),children:a.label}),(0,n.jsxs)("span",{className:"text-xs text-gray-500",children:["Created ",new Date(t.created_at).toLocaleDateString()]})]})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("div",{className:"text-right mr-4",children:[(0,n.jsx)("p",{className:"text-sm text-gray-400",children:"Steps"}),(0,n.jsx)("p",{className:"text-lg font-semibold text-white",children:"--"})]}),(0,n.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation()},className:"p-2 text-gray-500 hover:text-white hover:bg-dark-600 rounded opacity-0 group-hover:opacity-100 transition-all",children:(0,n.jsx)(S.Z,{className:"w-5 h-5"})})]})]})})})}},8989:function(e,t,a){a.d(t,{pf:function(){return f},NS:function(){return d},Pe:function(){return o},yQ:function(){return r},x0:function(){return i},tj:function(){return s},Bb:function(){return l},DE:function(){return m},eD:function(){return v},uF:function(){return c},Gq:function(){return g},xs:function(){return u},Hv:function(){return p},cI:function(){return x},eR:function(){return j},zE:function(){return y},pF:function(){return k},Gn:function(){return w},Mn:function(){return h},FF:function(){return b},aF:function(){return N}});var n=a(584);function s(){return(0,n.i)("/api/campaigns")}function r(e){return(0,n.i)("/api/campaigns/".concat(e))}function i(e){return(0,n.i)("/api/campaigns/".concat(e,"/stats"))}function l(){return(0,n.D)("/api/campaigns","POST")}function c(e){let t=e?"/api/investors?search=".concat(encodeURIComponent(e)):"/api/investors";return(0,n.i)(t)}function o(){return(0,n.D)("/api/investors/bulk","POST")}function u(e){return(0,n.i)(e?"/api/pipeline?campaign_id=".concat(e):"/api/pipeline")}function d(){return(0,n.D)("/api/pipeline","POST")}function x(e){return(0,n.i)(e?"/api/sequences?campaign_id=".concat(e):"/api/sequences")}function p(e){return(0,n.i)("/api/sequences/".concat(e))}function m(){return(0,n.D)("/api/sequences","POST")}function h(e){return(0,n.D)("/api/sequences/".concat(e),"PATCH")}function f(e){return(0,n.D)("/api/sequences/".concat(e),"POST")}function g(e){let t=new URLSearchParams;(null==e?void 0:e.campaign_id)&&t.set("campaign_id",e.campaign_id),(null==e?void 0:e.investor_id)&&t.set("investor_id",e.investor_id),(null==e?void 0:e.status)&&t.set("status",e.status);let a=t.toString();return(0,n.i)(a?"/api/outreach?".concat(a):"/api/outreach")}function y(e){return(0,n.i)(e?"/api/templates?type=".concat(e):"/api/templates")}function j(e){return(0,n.i)("/api/templates/".concat(e))}function v(){return(0,n.D)("/api/templates","POST")}function b(e){return(0,n.D)("/api/templates/".concat(e),"PATCH")}function N(){return(0,n.i)("/api/user")}function w(){return(0,n.D)("/api/user","PATCH")}function k(){return(0,n.D)("/api/user","PUT")}},584:function(e,t,a){a.d(t,{D:function(){return r},i:function(){return s}});var n=a(2265);function s(e){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{immediate:!0},[s,r]=(0,n.useState)({data:null,isLoading:null===(t=a.immediate)||void 0===t||t,error:null}),i=(0,n.useCallback)(async()=>{r(e=>({...e,isLoading:!0,error:null}));try{let t=await fetch(e),a=await t.json();if(!a.success)throw Error(a.error.message);return r({data:a.data,isLoading:!1,error:null}),a.data}catch(t){let e=t instanceof Error?t:Error("Unknown error");throw r({data:null,isLoading:!1,error:e}),e}},[e]);(0,n.useEffect)(()=>{a.immediate&&i().catch(()=>{})},[i,a.immediate]);let l=(0,n.useCallback)(()=>i(),[i]);return{...s,refetch:l}}function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST",[a,s]=(0,n.useState)({data:null,isLoading:!1,error:null}),r=(0,n.useCallback)(async a=>{s({data:null,isLoading:!0,error:null});try{let n=await fetch(e,{method:t,headers:{"Content-Type":"application/json"},body:a?JSON.stringify(a):void 0}),r=await n.json();if(!r.success)throw Error(r.error.message);return s({data:r.data,isLoading:!1,error:null}),r.data}catch(t){let e=t instanceof Error?t:Error("Unknown error");throw s({data:null,isLoading:!1,error:e}),e}},[e,t]),i=(0,n.useCallback)(()=>{s({data:null,isLoading:!1,error:null})},[]);return{...a,mutate:r,reset:i}}}}]);